---
title: "Team Assessment: Project-Grouped Chat Sessions"
date: 2026-02-17
type: design-review
status: assessment
participants: [UX Researcher, UI Designer, Frontend Engineer]
---

# Team Assessment: Project-Grouped Chat Sessions

## Proposal Summary

Regroup chat sessions in the sidebar by project directory (foldable), with:
1. **Project folders** ‚Äî sessions grouped by `working_dir`, collapsible
2. **Generic project** ‚Äî catch-all for sessions in `$HOME` (no specific project)
3. **"Open Project" button** ‚Äî opens a new session targeting a specific directory

---

## Current State (Already Implemented ‚úÖ)

The codebase **already has** project grouping in two places:

### Sidebar (`AppSidebar.tsx`)
- `groupSessionsByProject()` groups sessions by `working_dir`
- `getProjectName()` extracts folder name, maps `$HOME` ‚Üí "General"
- `SessionList` renders collapsible `<Collapsible>` groups with `FolderOpen` icons
- **BUT**: grouping only activates when `hasMultipleProjects` ‚Äî if all sessions share the same dir, it shows a flat list

### Sessions View (`SessionListView.tsx`)
- Full project-group view with `projectGroups` + `collapsedProjects` state
- Shows `working_dir` per session
- Toggle collapse per project

### What's Missing
- ‚ùå **"Open Project" button** ‚Äî no way to start a session targeting a specific directory
- ‚ùå **Always-on grouping** ‚Äî sidebar falls back to flat list for single-project users
- ‚ùå **Project persistence** ‚Äî no concept of "known projects" or project registry

---

## üß™ UX Researcher Assessment

### Evidence For (Strong Signal)
- **Mental model alignment**: Developers think in projects, not sessions. VS Code, JetBrains, and terminal multiplexers all organize by project/directory.
- **Design docs confirm**: `navigation-architecture.md` explicitly states "project-bound sessions" as a resolved design decision.
- **Existing usage**: `working_dir` is already tracked per session ‚Äî data is available.

### Evidence Against (Mild Concerns)
- **Discovery**: Users who only ever use `$HOME` would see a single "General" group forever ‚Äî the feature is invisible to them.
- **Cognitive load**: For users with 2-3 sessions, grouping adds hierarchy with no benefit.

### Recommendation
**Proceed, but with smart activation:**
- Show flat list when ‚â§5 sessions across ‚â§1 project (current behavior)
- Show grouped list when ‚â•2 projects detected
- Always show "Open Project" button (this is the key missing affordance)

### Key Question
> Should "Open Project" create a session immediately, or show a project hub/overview first?

**Recommendation**: Create session immediately with directory picker ‚Üí lower friction, matches `code .` muscle memory.

---

## üé® UI Designer Assessment

### Layout Proposal

```
‚îå‚îÄ Sidebar ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ üè† Home                    ‚îÇ
‚îÇ üí¨ Chat          [+] [üìÅ]  ‚îÇ  ‚Üê [üìÅ] = Open Project
‚îÇ  ‚îú‚îÄ üìÇ my-app              ‚îÇ
‚îÇ  ‚îÇ  ‚îú‚îÄ Fix login bug       ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ Add auth middleware  ‚îÇ
‚îÇ  ‚îú‚îÄ üìÇ goose               ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ Refactor agents     ‚îÇ
‚îÇ  ‚îú‚îÄ üìÇ General       ‚îÄ‚îÄ‚îê   ‚îÇ  ‚Üê $HOME sessions
‚îÇ  ‚îÇ  ‚îî‚îÄ Quick question   ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ View All            ‚îÇ   ‚îÇ
‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ‚îÄ‚îÄ‚îÄ‚îÇ
‚îÇ Workflows              ‚ñ∏‚îÇ   ‚îÇ
‚îÇ Monitoring              ‚îÇ   ‚îÇ
‚îÇ ...                     ‚îÇ   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Design Tokens & Patterns
- **Project header**: `FolderOpen` icon (already used) + project name + session count badge
- **General group**: Always last, uses `Home` icon instead of `FolderOpen` to differentiate
- **"Open Project" button**: Small `FolderPlus` icon button next to the Chat `[+]` button
- **Collapse state**: Per-project, persisted in localStorage
- **Active session highlight**: Current behavior is good ‚Äî `bg-background-medium`

### Interaction Design
| Action | Result |
|--------|--------|
| Click project header | Toggle collapse |
| Click session | Resume session (current) |
| Click [üìÅ] Open Project | OS directory picker ‚Üí create session in that dir |
| Click [+] New Chat | New session in current/last project dir |
| Drag session to project | (Future) Move session between projects |

### Accessibility
- `aria-expanded` on project headers ‚úÖ (already via `Collapsible`)
- `aria-label` on Open Project button needed
- Keyboard nav: Tab through projects, Enter to expand, Tab into sessions

### Verdict
**üëç Strong yes.** This aligns with the design system's zone-based navigation and adds the missing "project context" affordance. The "Open Project" button is the key new UI element.

---

## üõ† Frontend Engineer Assessment

### Implementation Complexity: Low-Medium

#### What's already done (reuse):
- `groupSessionsByProject()` ‚Äî works ‚úì
- `getProjectName()` ‚Äî works ‚úì
- `SessionList` with `Collapsible` ‚Äî works ‚úì
- `SessionItem` with rename, status indicators ‚Äî works ‚úì

#### What needs building:

**1. Always-on project grouping (Small change)**
```tsx
// Current: only groups when multiple projects
const hasMultipleProjects = projectGroups.length > 1;

// Proposed: always group, but collapse "General" if it's the only one
const shouldGroup = projectGroups.length > 1 || sessions.length > 5;
```

**2. "Open Project" button (Medium)**
```tsx
// In AppSidebar, next to the Chat button:
const handleOpenProject = async () => {
  const result = await window.electron.showOpenDialog({
    properties: ['openDirectory'],
    title: 'Open Project Directory',
  });
  if (!result.canceled && result.filePaths[0]) {
    await startNewSession('', setView, result.filePaths[0], {
      allExtensions: configContext.extensionsList,
    });
  }
};
```
**Note**: `showOpenDialog` is already used in `main.ts` for file picking. Need to expose a directory-picker IPC handler (or reuse existing one).

**3. Collapse state persistence (Small)**
```tsx
// localStorage-backed per-project collapse state
const [collapsedProjects, setCollapsedProjects] = useState<Set<string>>(() => {
  const saved = localStorage.getItem('sidebar-collapsed-projects');
  return saved ? new Set(JSON.parse(saved)) : new Set();
});
```

**4. "General" group styling (Trivial)**
```tsx
// Use Home icon for General, FolderOpen for named projects
const ProjectIcon = group.project === 'General' ? Home : FolderOpen;
```

### IPC Requirement
The directory picker needs an IPC channel. Check if one exists:

```
main.ts: ipcMain.handle('select-directory', ...)
```

If not, add one ‚Äî ~10 lines in `main.ts`, ~5 lines in `preload.ts`.

### Risk Assessment
| Risk | Severity | Mitigation |
|------|----------|------------|
| Directory picker not exposed via IPC | Low | Easy to add, pattern exists for file picker |
| Too many projects cluttering sidebar | Low | Cap at 10 recent projects, "View All" link |
| Session without `working_dir` | None | Already handled ‚Üí "General" |
| Performance with many sessions | None | Already using `React.memo` + `useMemo` |

### Estimated Effort
| Task | Lines | Time |
|------|-------|------|
| Always-on grouping threshold | ~10 | 15min |
| Open Project button + IPC | ~50 | 1hr |
| Collapse persistence | ~20 | 20min |
| General group icon | ~5 | 5min |
| Tests | ~30 | 30min |
| **Total** | **~115** | **~2hr** |

---

## üèÅ Unified Verdict

| Role | Vote | Confidence |
|------|------|------------|
| UX Researcher | ‚úÖ Proceed | 0.85 ‚Äî strong mental model fit, low risk |
| UI Designer | ‚úÖ Proceed | 0.90 ‚Äî clean integration with existing design |
| Frontend Engineer | ‚úÖ Proceed | 0.95 ‚Äî 80% already built, low effort |

### Consensus Recommendation

**Build it.** The feature is 80% implemented. The key missing piece is the **"Open Project" button** (directory picker ‚Üí new session). Everything else is polish on existing code.

### Suggested Implementation Order
1. Add "Open Project" (`FolderPlus`) button next to Chat `[+]` 
2. Wire to OS directory picker IPC
3. Adjust grouping threshold (always group when ‚â•2 projects OR ‚â•5 sessions)
4. Persist collapse state in localStorage
5. Use `Home` icon for "General" group

### Open Questions for Product Owner
1. Should "Open Project" remember recently-opened directories? (Adds ~30min)
2. Should projects be pinnable/reorderable? (Future scope)
3. Should the "Open Project" picker show a recent-dirs dropdown before falling back to OS picker? (Nice-to-have)
